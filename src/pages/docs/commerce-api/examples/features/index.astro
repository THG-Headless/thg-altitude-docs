---
import DocsLayout from '../../../../../layouts/DocsLayout.astro';
import DocsSidebar from '../../../../../components/DocsSidebar.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

const docs = await getCollection('docs');
const featuresDoc = docs.find((doc: CollectionEntry<'docs'>) => doc.id === 'commerce-api/examples/features/index.mdx');

const product = {
  id: "commerce-api",
  name: "Commerce API",
  description: "Build commerce experiences with our powerful GraphQL API",
  icon: "/icons/commerce-api.svg",
  quickLinks: [
    {
      title: "Overview",
      href: "/products/commerce-api"
    },
    {
      title: "Documentation",
      href: "/docs/commerce-api"
    },
    {
      title: "Examples",
      href: "/docs/commerce-api/examples"
    }
  ]
};

const { Content, headings } = featuresDoc ? await featuresDoc.render() : { Content: null, headings: [] };
---

{featuresDoc ? (
  <DocsLayout
    title={featuresDoc.data.title}
    description={featuresDoc.data.description}
    product={product}
    headings={headings}
  >
    <DocsSidebar slot="sidebar" product={product} />
    <Content />
  </DocsLayout>
) : (
  <DocsLayout
    title="Feature Examples"
    description="Examples for special features in Commerce API"
    product={product}
  >
    <DocsSidebar slot="sidebar" product={product} />
    <h1>Feature Examples</h1>
    <p>This section contains examples for special features available in Commerce API.</p>
    
    <h2>Available Examples</h2>
    <ul>
      <li><a href="/docs/commerce-api/examples/features/click-and-collect">Click and Collect</a></li>
      <li><a href="/docs/commerce-api/examples/features/customer-referrals">Customer Referrals</a></li>
      <li><a href="/docs/commerce-api/examples/features/loyalty">Loyalty</a></li>
      <li><a href="/docs/commerce-api/examples/features/product-personalisation">Product Personalisation</a></li>
      <li><a href="/docs/commerce-api/examples/features/reviews">Reviews</a></li>
      <li><a href="/docs/commerce-api/examples/features/supersize">Supersize</a></li>
    </ul>
  </DocsLayout>
)}