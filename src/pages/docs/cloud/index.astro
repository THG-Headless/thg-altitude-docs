---
import DocsLayout from '../../../layouts/DocsLayout.astro';
import DocsSidebar from '../../../components/DocsSidebar.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

const docs = await getCollection('docs');
const cloudDoc = docs.find((doc: CollectionEntry<'docs'>) => doc.id === 'cloud/index.mdx');

const product = {
  id: "cloud",
  name: "Platform",
  description: "Edge-first delivery of headless front-ends",
  icon: "/icons/altitude.svg",
  quickLinks: [
    {
      title: "Overview",
      href: "/products/cloud"
    },
    {
      title: "Documentation",
      href: "/docs/cloud"
    },
    {
      title: "API Reference",
      href: "/docs/cloud/api"
    }
  ]
};

const { Content, headings } = cloudDoc ? await cloudDoc.render() : { Content: null, headings: [] };
---

{cloudDoc ? (
  <DocsLayout
    title={cloudDoc.data.title}
    description={cloudDoc.data.description}
    product={product}
    headings={headings}
  >
    <DocsSidebar slot="sidebar" product={product} />
    {Content && <Content />}
  </DocsLayout>
) : (
  <DocsLayout
    title="Documentation Not Found"
    description="The requested documentation could not be found"
    product={product}
  >
    <DocsSidebar slot="sidebar" product={product} />
    <h1>Documentation Not Found</h1>
    <p>Sorry, the requested documentation could not be found.</p>
    <p><a href="/docs">Return to Documentation</a></p>
  </DocsLayout>
)}